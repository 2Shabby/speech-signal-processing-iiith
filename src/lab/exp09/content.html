<!-- This file needs to be edited by the lab developer to suit
the requirements of their lab in particular.-->

<!-- Add class="default" to include any element as it is
specified in default.html. 
Do not include class="default" to the elements that you want to
edit -->

<!DOCTYPE html>
<html>
<head></head>
<body>

<div id="experiment"> <!-- The Experiment Document Container-->

  <!-- The lab Header contains the logo and the name of the lab,
  usually displayed on the top of the page-->

  <header id="experiment-header" class="default">
  
    <div id="experiment-header-logo" class="logo">
      <!-- Enclose the logo image of your lab or write it in 
      text
      <img src="../images/logo.jpg" />
	-->
    </div>

    <div id="experiment-header-heading" class="heading">
      <!-- Write the name of your lab and link it to the home 
      page of your lab (h1 tag is preferred while writing your 
      lab name)-->
      <a href="../index.html">Speech Signal Processing Virtual Lab</a>	
    </div>

    <!-- Add any additional element you want to add to the lab 
    header, For example : Help (Enclosing them with suitable 
    div is recommended)-->

  </header>


  <!-- The lab article is the main content area where all the 
  experiment content sits-->
  <article id="experiment-article">
  
    <!-- The lab article has an header, optional navigational 
    menu, number of sections, an optional sidebar and a closing 
    footer-->
    
      <header id="experiment-article-heading" class="heading">
        <!-- You can add a welcome message or title of the 
        experiment here -->
        Expt-9: Formant Synthesis
        <!-- Add any additional element if required with proper 
        enclosing-->
      </header>

      <!-- Navigation menu is useful to organize the view of 
      multiple sections inside the article-->
      <nav id="experiment-article-navigation" class="default">
        <ul id="experiment-article-navigation-menu">
          <!-- The menu can be dynamically generated to contain 
          the headings of your sections or instead write the 
          menu items of your choice individually enclosedu in 
          <li> tag as shown below-->
        </ul>
      </nav>

      <!-- All the sections of your lab or experiment can be 
      enclosed together with a div element as shown below-->
      <div id="experiment-article-sections">

        <!-- First section of the article-->
        <section id="experiment-article-section-1">
          
          <div id="experiment-article-section-1-icon" 
          class="icon">
	    <!-- Enclose the icon image of your lab -->
	    <img src="../images/introduction.jpg" />
	  </div>	
          
          <!-- The heading for the section can be enclosed in a 
          div tag. -->
          <div id="experiment-article-section-1-heading" 
          class="heading">
            Objective
          </div>

          <!-- Write the section content inside a paragraph 
          element, You can also include images with <img> tag -->
          <div id="experiment-article-section-1-content" 
          class="content">	
            <p>
	    <!-- PUT CONTENT HERE -->
	    The objective of this experiment is to study/observe 
	    the relation between the parameters of the source-system 
	    and perception. This is achieved through construction of
	    all-pole filter coefficients using formant frequencies of
	    vowel sounds and generation of excitation signal using 
	    pitch period  information, and exciting the all-pole system.</p>
        </div>


      </section>

      <!-- Second section of the article-->
      <section id="experiment-article-section-2">
        
        <div id="experiment-article-section-2-icon" 
        class="icon">
	  <!-- Enclose the icon image of your lab. -->
	  <img src="../images/theory.jpg" />
	</div>
				
        <!-- The heading for the section can be enclosed in a 
        div tag. -->
        <div id="experiment-article-section-2-heading" 
        class="heading">
          Procedure
        </div>

        <!-- Write the section content inside a paragraph 
        element, we can also include images with <img> tag -->
        <div id="experiment-article-section-2-content" 
        class="content">
	    <!-- PUT CONTENT HERE -->
	    <ol style="list-style-type: lower-alpha;">
	      <li>Identify the various vowel sounds in a language.
	      </li>
	      <li>Record there various vowels in the context of 
		  <span style="font-style: italic;">hVd</span> where 
		  <span style="font-style: italic;">V</span> refers to 
		  vowels. Eg. heed, hod, etc.
	      </li>
	      <li>Note down the formant frequencies for the various sounds. Also
		note down the corresponding fundamental frequency.
	      </li>
	      <li>Build an all-pole filter using the formant frequencies. <br>
	      </li>
	      <li>Generate an excitation signal using the fundamental frequency,
		with impulses spaced at the fundamental period.
	      </li>
	      <li>Excite the all pole filter with the excitation generated in the
		previous step.
	      </li>
	      <li>Observe how the formant frequencies affect perception<br>
	      </li>
	    </ol>
        </div>
      </section>


      <section id="experiment-article-section-3">
        
        <div id="experiment-article-section-3-icon" 
        class="icon">
	  <!-- Enclose the icon image of your lab. -->
	  <img src="../images/objective.jpg" />
	</div>
     
        <div id="experiment-article-section-3-heading" 
        class="heading">
          Tutorial
        </div>

        <div id="experiment-article-section-3-content" 
        class="content">
	    <!-- PUT CONTENT HERE -->
<style type="text/css">
<!--
@page { margin: 0.79in }
P { margin-bottom: 0.08in }
TD P { margin-bottom: 0in }
-->
</style>
<p style="margin-bottom: 0.2in;"><b>Synthesizing vowels </b>
</p>
<ul>
<li>
<p style="margin-bottom: 0in;">Given formant frequencies F<sub>1</sub>,
F<sub>2</sub>, and F<sub>3</sub> of the vowel, fundamental period T<sub>0</sub>
and sampling frequency F<sub>s</sub> at which a vowel is to be
synthesized. </p>
</li>
<li>
<p style="margin-bottom: 0in;">The system used in the production of
vowels is an all pole filter. Compute the parameters of the filter
using formant frequencies and sampling frequency. The parameters are
the coefficients of the numerator and denominator polynomials b<sub>k</sub>'s
and a<sub>k</sub>'s of the system transfer function. </p>
</li>
<li>
<p style="margin-bottom: 0in;">The source used for excitation is a
periodic unit sample sequence. Generate unit sample sequence of
required length, depending on the length of the speech segment to be
generated. </p>
</li>
<li>
<p>Obtain response of the system with excitation generated using</p>
<ul>
<li>
<p>-&gt;&gt; y=filter(b,a,x);</p>
</li>
<li>
<p>-&gt;&gt; sound(y)</p>
</li>
</ul>
</li>
</ul>
<p><b>Illustration of Synthesizing Vowel </b><i><b>/a/</b></i><b>:</b></p>
<ul>
<li>
<p style="margin-bottom: 0in;">Given, <br>
-Formant frequencies F<sub>1</sub> = 560 Hz, F<sub>2</sub>= 1180 Hz,
and F<sub>3</sub>= 2480 Hz <br>
-Pitch period, T<sub>0 </sub>= 7.5msec <br>
-Sampling frequency, F<sub>s</sub>=10000Hz </p>
</li>
<li>
<p style="margin-bottom: 0in;">The system <i>H(z)</i>, shown in
Figure 1 is an all-pole filter. When input excitation <i>x(n)</i> is
unit sample sequence, then its response <i>y(n)</i> will be damped
sinusoids as shown in Figure 1. </p>
</li>
</ul>
<div style="text-align: center;"><img
style="width: 465px; height: 128px;" alt="Figure 1: All-pole filter."
src="media/block.png"></div>
<p style="margin-bottom: 0in;" align="center"><strong>Figure 1:</strong>
<i>All-pole filter.</i></p>
<ul>
<li>
<p style="margin-bottom: 0in;">The Transfer function <i>H(z)</i>
is given by, </p>
<center>
<table cellpadding="2" cellspacing="0" width="100%">
<col width="242*"> <col width="14*"> <tbody>
<tr>
<td style="border: medium none ; padding: 0in;" width="95%">
<p align="center"><!-- MATH
\begin{equation}
H(z) = \frac{\sum^{M-1}_{k=0}{b_k .z^{-k}}}{\sum^{N-1}_{k=0}{1 + {a_k.z^{-k}}}} \\\\
= \frac{1}{1+\sum^{6}_{k=1} {1+ [a_k z^{-k}]}} \\\\
\end{equation}
--><img
src="media/img40.png"
name="graphics29" style="width: 397px; height: 55px;"></p>
</td>
<td style="border: medium none ; padding: 0in;" width="5%">
<p align="right">(1)</p>
</td>
</tr>
</tbody>
</table>
</center>
<p align="right"></p>
</li>
<li>
<p style="margin-bottom: 0in;">For a given formant frequency F<sub>i</sub>,
let its bandwidth be B<sub>i</sub> = 0.1* F<sub>i</sub> </p>
</li>
<li>
<p>For each (F<sub>i </sub>, B<sub>i) </sub>system parameters are
computed using <br>
<br>
<br>
</p>
<center>
<table cellpadding="2" cellspacing="0" width="100%">
<col width="246*"> <col width="10*"> <tbody>
<tr>
<td style="border: medium none ; padding: 0in;" width="96%">
<p align="center"><!-- MATH
\begin{equation}
H_i(z) = \frac{1}{1 - 2.exp{(-pi.B_i.T)}.cos(2.pi.F_i.T).z^{-1} + exp{(-2.pi.B_i.T)}. z^{-2}} \\
\end{equation}
--><img
src="media/img44.png"
name="graphics33" style="width: 576px; height: 50px;"></p>
</td>
<td style="border: medium none ; padding: 0in;" width="4%">
<p align="right">(2)</p>
</td>
</tr>
</tbody>
</table>
</center>
<p align="right"></p>
<p>where T is sampling rate = 1/F<sub>s</sub> = 100*10<sup>-6</sup>
sec </p>
</li>
<li>
<p>Substituting F<sub>1</sub> = 560 Hz Hz, B<sub>1</sub> = 56 Hz Hz
in Equation 1 and simplifying we get </p>
<center>
<table cellpadding="2" cellspacing="0" width="100%">
<col width="239*"> <col width="17*"> <tbody>
<tr>
<td style="border: medium none ; padding: 0in;" width="93%">
<p align="center"><!-- MATH
\begin{equation}
H_1(z) = \frac{1}{ 1 - 1.8447*z^{-1} + 0.9654* z^{-2}}
\end{equation}
--><img
src="media/img49.png"
name="graphics38" style="width: 325px; height: 47px;"></p>
</td>
<td style="border: medium none ; padding: 0in;" width="7%">
<p align="right">(3)</p>
</td>
</tr>
</tbody>
</table>
</center>
<p align="right"></p>
</li>
<li>
<p>Substituting F<sub>2</sub>= 1180 Hz Hz, B<sub>2</sub>= 118 Hz Hz
in equation 1 and simplifying we get </p>
<center>
<table cellpadding="2" cellspacing="0" width="100%">
<col width="239*"> <col width="17*"> <tbody>
<tr>
<td style="border: medium none ; padding: 0in;" width="93%">
<p align="center"><!-- MATH
\begin{equation}
H_2(z) = \frac{1}{ 1 - 1.4213*z^{-1} + 0.9285* z^{-2}}
\end{equation}
--><img
src="media/img52.png"
name="graphics41" style="width: 325px; height: 47px;"></p>
</td>
<td style="border: medium none ; padding: 0in;" width="7%">
<p align="right">(4)</p>
</td>
</tr>
</tbody>
</table>
</center>
<p align="right"></p>
</li>
<li>
<p>substituting F<sub>3</sub>= 2480 Hz Hz, B<sub>3</sub>= 248 Hz Hz
in Equation 1 and simplifying we get </p>
<center>
<table cellpadding="2" cellspacing="0" width="100%">
<col width="239*"> <col width="17*"> <tbody>
<tr>
<td style="border: medium none ; padding: 0in;" width="93%">
<p align="center"><!-- MATH
\begin{equation}
H_3(z) = \frac{1}{ 1 - 0.0232*z^{-1} + 0.8557* z^{-2}}
\end{equation}
--><img
src="media/img55.png"
name="graphics44" style="width: 325px; height: 47px;"></p>
</td>
<td style="border: medium none ; padding: 0in;" width="7%">
<p align="right">(5)</p>
</td>
</tr>
</tbody>
</table>
</center>
<p align="right"></p>
</li>
<li>
<p style="margin-bottom: 0in;">The system transfer function <i>H(z)</i>
is given by, <i>H(z)=H</i><sub><i>1</i></sub><i>(z) * H</i><sub><i>2</i></sub><i>(z)
*H</i><sub><i>3</i></sub><i>(z)</i></p>
</li>
<li>
<p style="margin-bottom: 0in;">Substituting for <i>H</i><sub><i>1</i></sub><i>(z),
H</i><sub><i>2</i></sub><i>(z), H</i><sub><i>3</i></sub><i>(z)</i> and
simplifying we get </p>
<center>
<table cellpadding="2" cellspacing="0" width="100%">
<col width="244*"> <col width="12*"> <tbody>
<tr>
<td style="border: medium none ; padding: 0in;" width="96%">
<p align="center"><!-- MATH
\begin{equation}
H(z)=\frac{1}{1-a_1z^{-1}+a_2z^{-2}-a_3z^{-3}+a_4z^{-4}-a_5z^{-5}+a_6z^{-6}}\\
\end{equation}
--><img
src="media/img58.png"
name="graphics48" style="width: 486px; height: 48px;"></p>
</td>
<td style="border: medium none ; padding: 0in;" width="4%">
<p align="right">(6)</p>
</td>
</tr>
</tbody>
</table>
</center>
<p align="right"></p>
<p style="margin-bottom: 0in;">where a=[1, a<sub>1</sub>, a<sub>2</sub>,
a<sub>3</sub>, a<sub>4</sub>, a<sub>5</sub>, a<sub>6</sub>], is shown
below: </p>
</li>
<li>
<p style="margin-bottom: 0in;">From Equation 6 we have b=[1] <br>
a=<font color="#000000"><span style="text-decoration: none;"><font
face="Ubuntu, sans-serif"><font size="3"><span
style="font-style: normal;"><span style="font-weight: normal;"><span
style="text-decoration: none;">[1, -3.2892, 5.4471, 4.8318, -2.6604,
0.7669]</span></span></span></font></font></span></font> </p>
</li>
<li>
<p style="margin-bottom: 0in;">We can also compute values of a<sub>k</sub>'s
from <i>H</i><sub><i>1</i></sub><i>(z), H</i><sub><i>2</i></sub><i>(z),
H</i><sub><i>3</i></sub><i>(z)</i> by convolution <br>
-&gt;&gt; t = conv([1,-1.8447,0.9654], [1, -1.4213, 0.9285]); <br>
-&gt;&gt; a = conv(t,[1, -0.0232, 0.8557]); </p>
</li>
<li>
<p style="margin-bottom: 0in;"><span style="font-style: normal;"><span
style="font-weight: normal;">The values obtained by convolution are , <br>
</span></span><font color="#000000"><span
style="text-decoration: none;"><font face="Ubuntu, sans-serif"><font
size="3"><span style="font-style: normal;"><span
style="font-weight: normal;"><span style="text-decoration: none;">a =
[1, -3.2892, 5.472, -5.9844, 4.8321, -2.6606, 0.7670]</span></span></span></font></font></span></font><span
style="font-style: normal;"><span style="font-weight: normal;"> <br>
This gives the system parameters.</span></span> </p>
</li>
<li>
<p style="margin-bottom: 0in;">Generate the unit sample sequence to
be used as the excitation at the actual pitch period (7.5 msec i.e.,
around 60samples at 8 kHz) as <br>
-&gt;&gt; x1 = zeros(1, 4000); <br>
-&gt;&gt; for i =1:60:length(x1) <br>
x1(i) = 1; <br>
end; </p>
</li>
<li>
<p style="margin-bottom: 0in;">Similarly, excitation sequences at
half the pitch period and twice the pitch period are generated as
follows : <br>
-&gt;&gt; x2 = zeros(1, 4000); <br>
-&gt;&gt; for i =1:30:length(x1) <br>
x1(i) = 1; <br>
end; <br>
-&gt;&gt; x3 = zeros(1, 4000); <br>
-&gt;&gt; for i =1:120:length(x1) <br>
x1(i) = 1; <br>
end; </p>
</li>
<li>
<p>Now using the excitation sequence, the output sequence is
generated using</p>
<p>-&gt;&gt; y1 = filter(b,a,x1); <br>
-&gt;&gt; y2 = filter(b,a,x2); <br>
-&gt;&gt; y3 = filter(b,a,x3); </p>
<p>Figure 2 shows the excitation sequence and the signal
synthesized for a particular pitch period. It also shows the excitation
sequence and signal for half the pitch period and twice the pitch
period case. </p>
</li>
<li>
<p>Play the output sequence using sound command</p>
<p>-&gt;&gt; sound(y1); <br>
-&gt;&gt; sound(y2); <br>
-&gt;&gt; sound(y3); <br>
Figure 3,4,5 shows the synthesized signal for the sound unit /a/ and
the corresponding spectrograms for excitation with a period of half the
pitch, pitch, twice the pitch respectively. </p>
</li>
</ul>
<p style="margin-bottom: 0in;" align="center"><img
style="width: 529px; height: 405px;"
alt="The excitation and the response of the all-pole filter for impulse sequence excitation with a period of 3.75ms, 7.5ms and 15ms respectively."
src="media/lab4.png"><br>
</p>
<p style="margin-bottom: 0in;" align="center"><strong>Figure 2:</strong>
<i>The excitation and the response of the all-pole filter for impulse
sequence excitation with a period of 3.75ms, 7.5ms and 15ms
respectively.</i></p>
<p style="margin-bottom: 0in;" align="center"><img
style="width: 463px; height: 342px;"
alt="Figure 3: Waveform of the the synthesized vowel /a/ and its spectrogram for excitation at half the pitch period."
src="media/hp_spec.png"><br>
</p>
<p style="margin-bottom: 0in;" align="center"><strong>Figure 3:</strong>
<i>Waveform of the the synthesized vowel /a/ and its spectrogram for
excitation at half the pitch period.</i></p>
<p style="margin-bottom: 0in;" align="center"><img
style="width: 463px; height: 342px;"
alt="Figure 4: Waveform of the the synthesized vowel /a/ and its spectrogram for excitation at the pitch period."
src="media/p_spec.png"><br>
</p>
<p style="margin-bottom: 0in;" align="center"><strong>Figure 4:</strong>
<i>Waveform of the the synthesized vowel /a/ and its spectrogram for
excitation at the pitch period.</i></p>
<p style="margin-bottom: 0in;" align="center"><br>
</p>
<p style="margin-bottom: 0in;" align="center"><i><img
style="width: 463px; height: 342px;"
alt="Figure 5: Waveform of the the synthesized vowel /a/ and its spectrogram for excitation at twice the pitch period."
src="media/tp_spec.png"><br>
</i></p>
<p style="margin-bottom: 0in;" align="center"><strong>Figure 5:</strong>
<i>Waveform of the the synthesized vowel /a/ and its spectrogram for
excitation at twice the pitch period.</i></p>
<p>&nbsp;<br>
<br>
</p>
<p style="margin-bottom: 0in;"><br>
</p>

        </div>

      </section>


      <section id="experiment-article-section-4">

        <div id="experiment-article-section-4-icon" 
        class="icon">
	  <!-- Enclose the icon image of your lab.-->
	  <img src="../images/simulation.jpg" />
	</div>

        <div id="experiment-article-section-4-heading" 
        class="heading">
          Experiment
        </div>

        <div id="experiment-article-section-4-content" 
        class="content">
	    <!-- PUT CONTENT HERE -->
<p>
	    <applet code=vowelSynthesis.VowelSynthesisApplet.class 
		    archive="media/vowelSynthesis.jar" width=900 height=600>
	      <param name=foo value="bar">
		You need to have Java plugin installed to carry out
		any experiments
	    </applet>
</p>
        </div>

      </section>

      <section id="experiment-article-section-5">
   
        <div id="experiment-article-section-5-icon" 
        class="icon">
	  <!-- Enclose the icon image of your lab.-->
	  <img src="../images/manual.jpg" />
	</div>

        <div id="experiment-article-section-5-heading" 
        class="heading">
          Observations
        </div>

        <div id="experiment-article-section-5-content" 
        class="content">
	    <!-- PUT CONTENT HERE -->
<ul>
<li>	    The synthesized vowel sounds as that of vowel except 
	    at the cost of naturalness. The formants are clearly 
	    defined and there is no variability in the signal as 
	    it is a synthetic siganl. 
</li>
<li>
           There is a direct correspondence between a set of 
	   formant frequencies and a vowel.
</li>
</ul>
          </div>

        </section>
<!--
        <section id="experiment-article-section-6">
      
          <div id="experiment-article-section-6-icon" 
          class="icon">
	    <img src="../images/quizzes.jpg" />
	  </div>

          <div id="experiment-article-section-6-heading" 
          class="heading">
            Q & A
          </div>

          <div id="experiment-article-section-6-content" 
          class="content">
           
          </div>

        </section>

        <section id="experiment-article-section-7">
	  
          <div id="experiment-article-section-7-icon" 
          class="icon">
	    <img src="../images/procedure.jpg" />
	  </div>
	
          <div id="experiment-article-section-7-heading" 
          class="heading">
	    Assignments
	  </div>
	
          <div id="experiment-article-section-7-content" 
          class="content">

	  </div>
	
        </section>
-->			
		
   <section id="experiment-article-section-8">

        <div id="experiment-article-section-8-icon" 
        class="icon">
          <img src="../images/manual.jpg" />
        </div>

        <div id="experiment-article-section-8-heading" 
        class="heading">
          Useful Tools
        </div>

        <div id="experiment-article-section-8-content" 
        class="content">
        <ul>
        <li>

                <a href="http://sourceforge.net/projects/wavesurfer"> Click here to download wavesurfer.</a>
        </li>

        <li>
                <a href="http://speech.iiit.ac.in/vlabs/weboctave"> Click here to start weboctave.</a>
        </li

        </ul>
          </div>

        </section>



        <section id="experiment-article-section-9">
   
          <div id="experiment-article-section-9-icon" 
          class="icon">
	    <!-- Enclose the icon image of your lab.-->
	    <img src="../images/readings.jpg" />
	  </div>

          <div id="experiment-article-section-9-heading" 
          class="heading">
            Further Readings
          </div>

          <div id="experiment-article-section-9-content" 
          class="content">
<ul>
			<li> <i>Digital Processing of Speech Signals</i>, L.R. Rabiner and L.R. Schafer, Chapter 3</li>
			<li> <i>Discrete-Time Speech Signal Processing</i>, Thomas F. Quatieri , Chapter 4</li>
</ul>     
     
          </div>

        </section>

      </div>


    <!-- An article can have a sidebar that contain related 
    links and additional material (however it is kept optional 
    at this moment) -->
    <aside id="lab-article-sidebar" class="default">
      <!-- put the content that you want to appear in the 
      sidebar -->	
    </aside>


    <!-- Article footer can display related content and 
    additional links -->						
    <footer id="lab-article-footer" class="default">
      <!-- Put the content that you want to appear here -->
    </footer>

  </article>


  <!-- Links to other labs, about us page can be kept the lab 
  footer-->
  <footer id="lab-footer" class="default">
    <!-- Put the content here-->
  </footer>

</div>		

</body>
</html>
